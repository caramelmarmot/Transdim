@inject Transdim.Service.IGameStateService GameStateService;

<div class="container">
    <div class="row game-log-container">
        <div class="col-12">
            <div class="container">
                <div class="row log-row log-row-oldest">@GetLogText(2)</div>
                <div class="row log-row log-row-middle">@GetLogText(1)</div>
                <div class="row log-row log-row-newest">@GetLogText(0)</div>
            </div>
        </div>
    </div>
</div>

@functions {
    private Game game;

    protected override void OnInit()
    {
        game = GameStateService.Game;
        GameStateService.OnChange += StateHasChanged;
    }

    public string GetLogText(int distanceFromEnd)
    {
        // TODO: use controller
        if (game == null || game.GameActions.Count <= distanceFromEnd)
        {
            return string.Empty;
        }

        var indexToReport = game.GameActions.Count - distanceFromEnd - 1;

        return game.GameActions[indexToReport].LogText;
    }
}
